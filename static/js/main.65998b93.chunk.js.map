{"version":3,"sources":["product.js","total.js","ProductList.js","App.js","reportWebVitals.js","index.js"],"names":["Product","props","state","typediscount","type","price","onremove","bind","click","console","log","this","id","onRemoveProduct","handleTotal","qty","discount","Fragment","onClick","className","src","img_url","style","width","height","name","subtract","index","disabled","xmlns","fill","viewBox","fillRule","d","add","React","Component","Total","fontWeight","fontSize","count","actual","toFixed","borderTop","backgroundColor","total","cproductList","ProductList","onReload","productList","i","length","setState","key","window","localStorage","setItem","JSON","stringify","calculateTotal","saveStateToLocalStorage","hydrateStateWithLocalStorage","s","hasOwnProperty","value","getItem","parse","e","idx","prevstate","filter","item","newstate","component","products","map","product","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.65998b93.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\n\nclass Product extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        typediscount: (this.props.type===\"fiction\")? (0.15*this.props.price):0\n      };\n    //  this.add = this.add.bind(this);\n     // this.subtract = this.subtract.bind(this);\n      this.onremove = this.onremove.bind(this);\n      this.click = this.click.bind(this);\n    }\n   /* add() {\n      this.setState({\n        qty: this.state.qty + 1\n      });\n      this.props.handleTotal(this.props.price, this.props.discount, this.state.typediscount);\n    }\n  \n    subtract() {\n        if(this.state.qty>0){\n      this.setState({\n        qty: this.state.qty - 1\n      });\n      this.props.handleTotal(-this.props.price, -this.props.discount, -this.state.typediscount);\n    }\n    }\n  */\n    onremove(){\n        console.log(this.props.id);\n        this.props.onRemoveProduct(this.props.id);\n        this.props.handleTotal(-this.props.price*this.props.qty, -((this.props.discount/100)*this.props.price*this.props.qty), -this.state.typediscount*this.props.qty);\n    }\n    click(){\n      console.log(this.props.id);\n    }\n\n    render() {\n      return (\n        <React.Fragment>\n          <div key = {this.props.id} onClick = {this.click} className = \"d-inline-flex flex-row\">  \n                            <td className = \"shadow-sm p-2 m-2 bg-white name\"><img src={this.props.img_url} style={{width:'20px',height:'20px'}}/>\n                             <span className = \"p-2\">{this.props.name}</span>\n                             <span className=\"float-right cross\" onClick={this.onremove}> X\n                             </span>\n                             </td>\n                            <td className = \"d-inline-flex p-2\"> \n                            <i className=\"bi bi-dash p-2 minus\" onClick={this.props.subtract.bind(this, this.props.index)} disabled={this.state.qty<1}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-dash\" viewBox=\"0 0 16 16\">\n                            <path fillRule=\"evenodd\" d=\"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z\"/>\n                            </svg>\n                            </i>\n                            <span className = \"shadow-sm p-2 bg-white\">{this.props.qty}</span>\n                            <span className = \"p-2 plus\" onClick={this.props.add.bind(this, this.props.index)}>+</span>\n                            </td>\n                            <td className=\"p-2 m-2\">${this.props.price}</td>\n            </div>\n        </React.Fragment>\n      );\n    }\n  }\n\n  export default Product;","import React from 'react';\nimport './App.css';\n\nclass Total extends React.Component {\n    constructor(props) {\n      super(props);\n    }\n    render() {\n      let mystyle = {\n        borderTop: \"1px solid #ddd\",\n        backgroundColor: \"#F6F6F6\",\n        fontSize: '14px'\n      };\n      return (\n        <div className = \"container card shadow-sm\" style={{width: '300px'}}>\n          <h3 className=\"row\" style={{ fontWeight: 400, fontSize: '14px'}}>\n            <span className=\"col-6\">Items ({this.props.count})</span>\n            <span className=\"col-6 text-right float-right\">: ${this.props.actual.toFixed(2)}</span>\n          </h3>\n          <h3 className=\"row\" style={{ fontWeight: 400, fontSize: '14px' }}>\n            <span className=\"col-6\">Discount</span>\n            <span className=\"col-6 text-right float-right\">: -${this.props.discount.toFixed(2)}</span>\n          </h3>\n          <h3 className=\"row\" style={{fontWeight: 400, fontSize: '14px'}}>\n            <span className=\"col-6\">Type discount</span>\n            <span className=\"col-6 text-right float-right\">: -${this.props.typediscount.toFixed(2)}</span>\n          </h3>\n          <h3 className=\"row card-body\" style={mystyle}>\n            <span className=\"col-6\">Order Total</span>\n            <span className=\"col-6 text-right float-right\">: ${this.props.total.toFixed(2)}</span>  \n          </h3>\n        </div>\n      );\n    }\n  }\n  \n  export default Total;","import React from 'react';\nimport './App.css';\nimport Product from './product'\nimport Total from './total'\n\n\nlet cproductList =  [ { \"id\": 9090, \"name\": \"Item1\", \"price\": 200, \"discount\": 10, \"type\": \"fiction\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9091, \"name\": \"Item2\", \"price\": 250, \"discount\": 15, \"type\": \"literature\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9092, \"name\": \"Item3\", \"price\": 320, \"discount\": 5, \"type\": \"literature\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9093, \"name\": \"Item4\", \"price\": 290, \"discount\": 0, \"type\": \"thriller\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9094, \"name\": \"Item5\", \"price\": 500, \"discount\": 25, \"type\": \"thriller\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9095, \"name\": \"Item6\", \"price\": 150, \"discount\": 5, \"type\": \"literature\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9096, \"name\": \"Item7\", \"price\": 700, \"discount\": 22, \"type\": \"literature\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9097, \"name\": \"Item8\", \"price\": 350, \"discount\": 18, \"type\": \"fiction\", \"img_url\": \"https://place-hold.it/40.jpg\" } ];\nclass ProductList extends React.Component {\n    constructor(props) {\n      super(props);\n  \n      this.state = {\n        total: 0,\n        actual:0,\n        discount: 0,\n        typediscount:0,\n        productList: [ { \"id\": 9090, \"name\": \"Item1\", \"price\": 200, \"discount\": 10, \"type\": \"fiction\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9091, \"name\": \"Item2\", \"price\": 250, \"discount\": 15, \"type\": \"literature\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9092, \"name\": \"Item3\", \"price\": 320, \"discount\": 5, \"type\": \"literature\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9093, \"name\": \"Item4\", \"price\": 290, \"discount\": 0, \"type\": \"thriller\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9094, \"name\": \"Item5\", \"price\": 500, \"discount\": 25, \"type\": \"thriller\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9095, \"name\": \"Item6\", \"price\": 150, \"discount\": 5, \"type\": \"literature\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9096, \"name\": \"Item7\", \"price\": 700, \"discount\": 22, \"type\": \"literature\", \"img_url\": \"https://place-hold.it/40.jpg\" }, { \"id\": 9097, \"name\": \"Item8\", \"price\": 350, \"discount\": 18, \"type\": \"fiction\", \"img_url\": \"https://place-hold.it/40.jpg\" } ]\n      };\n  \n      this.calculateTotal = this.calculateTotal.bind(this);\n      this.onRemoveProduct = this.onRemoveProduct.bind(this);\n      this.add = this.add.bind(this);\n      this.subtract = this.subtract.bind(this);\n      this.onReload = this.onReload.bind(this);\n      this.saveStateToLocalStorage = this.saveStateToLocalStorage.bind(this);\n      this.hydrateStateWithLocalStorage = this.hydrateStateWithLocalStorage.bind(this);\n    }\n    saveStateToLocalStorage() {\n      // for every item in React state\n     /* for (let key in this.state) {\n        // save to localStorage\n        window.localStorage.setItem(key, JSON.stringify(this.state[key]));\n        console.log(\"savetolocal= \"+this.state[key]);\n      }*/\n      /*setInterval(function () {\n        for (let key in this.state) {\n          // save to localStorage\n          window.localStorage.setItem(key, JSON.stringify(this.state[key]));\n        }\n        console.log(\"localStorage= \" + window.localStorage);\n      }, 1000);*/\n\n    }\n    hydrateStateWithLocalStorage() {\n      // for all items in state\n      let s=0;\n      for (let key in this.state) {\n        // if the key exists in localStorage\n        if (window.localStorage.hasOwnProperty(key)) {\n          s=1;\n          // get the key's value from localStorage\n          let value = window.localStorage.getItem(key);\n  \n          // parse the localStorage string and setState\n          try {\n            value = JSON.parse(value);\n            console.log('before')\n            this.setState({ [key]: value });\n            console.log(\"key= \"+key +\" value= \"+value + ' after')\n          } catch (e) {\n            // handle empty string\n            this.setState({ [key]: value });\n          }\n        }\n      }\n      return (s===1);\n    }\n    componentDidMount(){\n      let s = this.hydrateStateWithLocalStorage();\n      console.log(\"s is \"+s);\n      if(!s){\n      let productList = cproductList;\n      let total=0;\n      let discount = 0;\n      let typediscount= 0;\n      for(var i=0;i<productList.length;i++){\n            productList[i].qty = 1;\n            cproductList[i].qty = 1;\n            total+=productList[i].price;\n            cproductList[i].typediscount = (cproductList[i].type===\"fiction\")? (0.15*cproductList[i].price):0;\n            productList[i].typediscount = (productList[i].type===\"fiction\")? (0.15*productList[i].price):0;\n            discount+=(productList[i].discount/100)*productList[i].price;\n            typediscount+=productList[i].typediscount;\n      }\n      console.log(\"initial total = \"+total+\" initial discount = \"+discount);\n      this.setState({productList:productList, actual: total, total:total-discount-typediscount, discount:discount, typediscount: typediscount},\n        ()=>{\n        for (let key in this.state) {\n          // save to localStorage\n          window.localStorage.setItem(key, JSON.stringify(this.state[key]));\n        }\n        console.log(\"localstorage totalcalculate= \"+window.localStorage.total);\n        });\n    }\n    /*  setInterval(function () {\n        for (let key in this.state) {\n          // save to localStorage\n          window.localStorage.setItem(key, JSON.stringify(this.state[key]));\n        }\n        console.log(\"localStorage= \" + window.localStorage);\n      }, 1000)*/\n\n    /*window.addEventListener(\n      \"beforeunload\",\n      this.saveStateToLocalStorage.bind(this)\n    );*/\n    }\n\n    componentWillUnmount() {\n      //window.localStorage.clear();\n      console.log(\"before unmount \"+window.localStorage);\n      for (let key in this.state) {\n        // save to localStorage\n        window.localStorage.setItem(key, JSON.stringify(this.state[key]));\n      }\n     /* window.removeEventListener(\n        \"beforeunload\",\n        this.saveStateToLocalStorage.bind(this)\n      );\n  \n      // saves if component has a chance to unmount\n      this.saveStateToLocalStorage();*/\n  }\n\n    add(idx) {\n      let productList = this.state.productList;\n      console.log(productList[idx].discount);\n     productList[idx].qty++;\n     console.log(productList[idx].price);\n      this.setState({\n        productList: productList\n      });\n      this.calculateTotal(productList[idx].price,(productList[idx].discount/100)*productList[idx].price, productList[idx].typediscount);\n    }\n  \n    subtract(idx) {\n        if(this.state.productList[idx].qty>0){\n          let productList = this.state.productList;\n          productList[idx].qty--;\n      this.setState({\n        productList: productList\n      });\n      this.calculateTotal(-productList[idx].price, -(productList[idx].discount/100)*productList[idx].price, -productList[idx].typediscount);\n    }\n    }\n    onReload =()=> {\n      let productList = cproductList;\n      let total=0;\n      let discount = 0;\n      let typediscount= 0;\n      for(var i=0;i<productList.length;i++){\n            productList[i].qty = 1;\n            cproductList[i].qty = 1;\n            total+=productList[i].price;\n            cproductList[i].typediscount = (cproductList[i].type===\"fiction\")? (0.15*cproductList[i].price):0;\n            productList[i].typediscount = (productList[i].type===\"fiction\")? (0.15*productList[i].price):0;\n            discount+=(productList[i].discount/100)*productList[i].price;\n            typediscount+=productList[i].typediscount;         console.log(this.state.productList);\n    }\n    console.log(\"initial total = \"+total+\" initial discount = \"+discount);\n    this.setState({productList:productList, actual: total, total:total-discount-typediscount, discount:discount, typediscount: typediscount},\n      ()=>{\n      for (let key in this.state) {\n        // save to localStorage\n        window.localStorage.setItem(key, JSON.stringify(this.state[key]));\n      }\n      console.log(\"localstorage totalcalculate= \"+window.localStorage.total);\n      });\n  }\n    onRemoveProduct(id) {\n        console.log(id);\n        this.setState(prevstate => ({\n          productList: prevstate.productList.filter(item=>item.id!==id)\n        }));\n        /*const products = this.state.productList.filter((item) => item.id !== id);\n    \n        this.setState({ productList: products });*/\n        console.log(this.state.productList.length); \n      };\n  \n    calculateTotal(price, discount, typediscount) {\n      //console.log(price+\" \"+discount);\n      let total = this.state.total + price - discount -typediscount;\n      let actual = this.state.actual + price;\n      console.log(\"total= \"+total);\n      this.setState({\n        total: total,\n        actual:actual,\n        discount: this.state.discount + discount,\n        typediscount: this.state.typediscount + typediscount\n      }, ()=>{\n        let newstate = this.state;\n        for (let key in this.state) {\n          // save to localStorage\n          window.localStorage.setItem(key, JSON.stringify(this.state[key]));\n        }\n        console.log(\"localstorage totalcalculate= \"+window.localStorage.total+\" \"+newstate.total);\n      });\n    /*  let newstate = this.state;\n      for (let key in this.state) {\n          // save to localStorage\n          window.localStorage.setItem(key, JSON.stringify(this.state[key]));\n        }\n        console.log(\"localstorage totalcalculate= \"+window.localStorage.total+\" \"+newstate.total);*/\n\n     // window.localStorage.setItem(total, JSON.stringify(total));\n     // console.log(this.state.total);\n    }\n  \n    render() {  \n      var component = this;\n      const p = this.state.productList;\n      if(p.length===0) return(\n          <div><button className=\"btn btn-primary container\"  onClick={this.onReload.bind(this)} style={{width: '100px'}}>Reload</button></div>\n      )\n      var products =  this.state.productList.map(function(product,index) {\n        return (\n        <div className=\"container\">            \n          <Product\n            name={product.name}\n            img_url = {product.img_url}\n            key={product.id}\n            id = {product.id}\n            price={product.price}\n            type = {product.type}\n            qty = {product.qty}\n            add = {component.add}\n            index = {index}\n            subtract = {component.subtract}\n            discount = {product.discount}\n            onRemoveProduct={component.onRemoveProduct}\n            handleTotal={component.calculateTotal}\n          />\n          </div>\n        );\n      });\n  \n      return (\n        <React.Fragment>\n          <div className=\"d-inline-flex flex-row\">\n            <div className=\"p-2\">\n            <table className=\"table borderless\">\n              <div className=\"container\">\n            <thead>\n                    <tr>\n                        <th className = \"item\">Items({this.state.productList.length})</th>\n                        <th className=\"qty\">Qty</th>\n                        <th>Price</th>\n                    </tr>\n            </thead>\n            </div>\n          <div className=\"p-2\">\n              <tbody>\n                <tr>\n                   {products}\n                </tr>\n              </tbody>\n          </div>\n            </table>\n            </div>\n          <div className=\"p-2 m-2\">\n          <Total total={this.state.total} count = {this.state.productList.length} actual={this.state.actual} discount = {this.state.discount} typediscount = {this.state.typediscount}/>\n          </div>\n          </div>\n        </React.Fragment>\n      );\n    }\n  }\n\n  export default ProductList;","import './App.css';\nimport ProductList from './ProductList';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ProductList />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}